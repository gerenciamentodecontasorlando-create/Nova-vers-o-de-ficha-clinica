<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>BTX-Tech | Fichas Odontológicas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <style>
    :root {
      --bg: #020617;
      --card: #020617;
      --verde1: #22c55e;
      --verde2: #4ade80;
      --texto: #e5e7eb;
      --texto-suave: #9ca3af;
      --borda: #1f2937;
      --linha: #16a34a;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 20px 10px 40px;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #020617, #000000 60%);
      color: var(--texto);
      display: flex;
      justify-content: center;
    }

    .app {
      width: 100%;
      max-width: 960px;
    }

    .topo {
      display: flex;
      gap: 18px;
      padding: 18px;
      border-radius: 18px;
      border: 1px solid var(--borda);
      background: radial-gradient(circle at top left, rgba(34,197,94,0.25), #020617 55%);
      box-shadow: 0 18px 40px rgba(0,0,0,0.7);
      margin-bottom: 20px;
    }

    .topo-foto {
      flex: 0 0 120px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .topo-foto img {
      width: 110px;
      height: 110px;
      border-radius: 999px;
      object-fit: cover;
      border: 3px solid var(--verde1);
      box-shadow: 0 0 25px rgba(34,197,94,0.6);
    }

    .topo-texto {
      flex: 1;
    }

    .topo-titulo {
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: 4px;
      color: var(--verde2);
    }

    .topo-subtitulo {
      font-size: 0.85rem;
      color: var(--texto-suave);
      margin-bottom: 8px;
    }

    .topo-bio {
      font-size: 0.85rem;
      line-height: 1.5;
      color: var(--texto);
    }

    .linha-verde {
      margin-top: 10px;
      height: 1px;
      border-radius: 999px;
      background: linear-gradient(90deg, transparent, var(--linha), transparent);
    }

    .cartao {
      border-radius: 18px;
      border: 1px solid var(--borda);
      background: rgba(2, 6, 23, 0.96);
      padding: 18px;
      margin-bottom: 18px;
      box-shadow: 0 16px 32px rgba(0,0,0,0.7);
    }

    .cartao-titulo {
      font-size: 1rem;
      font-weight: 600;
      color: var(--verde2);
      margin-bottom: 4px;
    }

    .cartao-subtitulo {
      font-size: 0.8rem;
      color: var(--texto-suave);
      margin-bottom: 14px;
    }

    .grupo {
      margin-bottom: 10px;
    }

    label {
      display: block;
      font-size: 0.78rem;
      margin-bottom: 4px;
      color: var(--texto-suave);
    }

    input, textarea {
      width: 100%;
      padding: 7px 9px;
      border-radius: 10px;
      border: 1px solid var(--borda);
      background: #020617;
      color: var(--texto);
      font-size: 0.9rem;
    }

    textarea {
      resize: vertical;
      min-height: 60px;
    }

    input:focus, textarea:focus {
      outline: 1px solid var(--verde1);
      border-color: var(--verde1);
    }

    .linha-dupla {
      display: flex;
      gap: 10px;
    }

    .linha-dupla .grupo { flex: 1; margin-bottom: 0; }

    .botao {
      margin-top: 10px;
      width: 100%;
      padding: 9px 14px;
      font-size: 0.9rem;
      font-weight: 600;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: linear-gradient(90deg, #15803d, #22c55e);
      color: #020617;
      box-shadow: 0 10px 26px rgba(34,197,94,0.55);
      transition: transform 0.08s ease, box-shadow 0.08s ease;
    }

    .botao:hover {
      transform: translateY(-1px);
      box-shadow: 0 13px 30px rgba(34,197,94,0.7);
    }

    .rodape {
      text-align: center;
      font-size: 0.7rem;
      color: var(--texto-suave);
      margin-top: 8px;
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- TOPO: FOTO + MINI HISTÓRIA -->
    <section class="topo">
      <div class="topo-foto">
        <!-- Substitua "minha-foto.jpg" pelo caminho da SUA foto -->
        <img src="minha-foto.jpg" alt="Dr. Orlando Abreu" />
      </div>
      <div class="topo-texto">
        <div class="topo-titulo">Dr. Orlando Abreu Gomes da Silva</div>
        <div class="topo-subtitulo">Cirurgião-dentista • Desenvolvedor BTX-Tech</div>
        <div class="topo-bio">
          Cirurgião-dentista atuante no Baixo Tocantins, apaixonado por tecnologia e inovação em saúde.
          Acadêmico de Medicina na Faculdade de Ciências Médicas Afya Abaetetuba.
          Fundador da BTX-Tech, focada em soluções simples e acessíveis para o consultório.
          Este sistema integra ficha clínica, receita e orçamento em um ambiente digital seguro.
        </div>
        <div class="linha-verde"></div>
      </div>
    </section>

    <!-- DADOS DO PROFISSIONAL (usados em todos os PDFs) -->
    <section class="cartao">
      <div class="cartao-titulo">Dados do profissional / clínica</div>
      <div class="cartao-subtitulo">Essas informações aparecem em todos os PDFs gerados.</div>

      <div class="linha-dupla">
        <div class="grupo">
          <label for="nomeDentista">Nome do dentista</label>
          <input id="nomeDentista" type="text" placeholder="Dr. Orlando Abreu Gomes da Silva">
        </div>
        <div class="grupo">
          <label for="croDentista">CRO</label>
          <input id="croDentista" type="text" placeholder="CRO-PA 00000">
        </div>
      </div>

      <div class="linha-dupla" style="margin-top:8px;">
        <div class="grupo">
          <label for="nomeClinica">Nome da clínica</label>
          <input id="nomeClinica" type="text" placeholder="BTX Odontologia & Tecnologia">
        </div>
        <div class="grupo">
          <label for="cidadeUf">Cidade / UF</label>
          <input id="cidadeUf" type="text" placeholder="Abaetetuba - PA">
        </div>
      </div>
    </section>

    <!-- FICHA CLÍNICA -->
    <section class="cartao">
      <div class="cartao-titulo">Ficha Clínica Odontológica</div>
      <div class="cartao-subtitulo">Registro clínico básico do atendimento.</div>

      <div class="grupo">
        <label for="fc_nomePaciente">Nome do paciente</label>
        <input id="fc_nomePaciente" type="text" placeholder="Nome completo do paciente">
      </div>

      <div class="linha-dupla">
        <div class="grupo">
          <label for="fc_data">Data</label>
          <input id="fc_data" type="date">
        </div>
        <div class="grupo">
          <label for="fc_denteRegiao">Dente / região</label>
          <input id="fc_denteRegiao" type="text" placeholder="Ex.: 37, 11, hemiarco sup. dir.">
        </div>
      </div>

      <div class="grupo">
        <label for="fc_queixa">Queixa principal</label>
        <textarea id="fc_queixa" placeholder="Descrever queixa principal relatada pelo paciente."></textarea>
      </div>

      <div class="grupo">
        <label for="fc_historia">História médica / medicações</label>
        <textarea id="fc_historia" placeholder="Doenças sistêmicas, alergias, uso de medicamentos, cirurgias prévias etc."></textarea>
      </div>

      <div class="grupo">
        <label for="fc_exame">Exame clínico / plano de tratamento</label>
        <textarea id="fc_exame" placeholder="Resumo dos achados clínicos, exames complementares e conduta planejada."></textarea>
      </div>

      <button class="botao" onclick="gerarPdfFichaClinica()">
        Gerar PDF da Ficha Clínica
      </button>
    </section>

    <!-- RECEITA ODONTOLÓGICA -->
    <section class="cartao">
      <div class="cartao-titulo">Receita Odontológica</div>
      <div class="cartao-subtitulo">Prescrição medicamentosa para o paciente.</div>

      <div class="grupo">
        <label for="rc_nomePaciente">Nome do paciente</label>
        <input id="rc_nomePaciente" type="text" placeholder="Nome completo do paciente">
      </div>

      <div class="linha-dupla">
        <div class="grupo">
          <label for="rc_data">Data</label>
          <input id="rc_data" type="date">
        </div>
        <div class="grupo">
          <label for="rc_validade">Validade (opcional)</label>
          <input id="rc_validade" type="text" placeholder="Ex.: Válida por 5 dias">
        </div>
      </div>

      <div class="grupo">
        <label for="rc_medicamentos">Medicamentos / posologia</label>
        <textarea id="rc_medicamentos" placeholder="1) Amoxicilina 500 mg – tomar 1 cápsula de 8/8h por 7 dias...
2) Ibuprofeno 600 mg – tomar 1 comprimido de 8/8h se dor..."></textarea>
      </div>

      <div class="grupo">
        <label for="rc_observacoes">Observações (opcional)</label>
        <textarea id="rc_observacoes" placeholder="Instruções adicionais ao paciente, cuidados pós-operatórios etc."></textarea>
      </div>

      <button class="botao" onclick="gerarPdfReceita()">
        Gerar PDF da Receita
      </button>
    </section>

    <!-- ORÇAMENTO -->
    <section class="cartao">
      <div class="cartao-titulo">Orçamento Odontológico</div>
      <div class="cartao-subtitulo">Resumo do plano de tratamento e valores.</div>

      <div class="grupo">
        <label for="or_nomePaciente">Nome do paciente</label>
        <input id="or_nomePaciente" type="text" placeholder="Nome completo do paciente">
      </div>

      <div class="linha-dupla">
        <div class="grupo">
          <label for="or_data">Data</label>
          <input id="or_data" type="date">
        </div>
        <div class="grupo">
          <label for="or_validade">Validade do orçamento</label>
          <input id="or_validade" type="text" placeholder="Ex.: Válido por 30 dias">
        </div>
      </div>

      <div class="grupo">
        <label for="or_itens">Procedimentos e valores</label>
        <textarea id="or_itens" placeholder="Ex.:
1) Restauração em resina composta dente 37 – R$ 250,00
2) Profilaxia + aplicação tópica de flúor – R$ 180,00
3) Radiografia periapical – R$ 60,00"></textarea>
      </div>

      <div class="grupo">
        <label for="or_total">Valor total estimado</label>
        <input id="or_total" type="text" placeholder="Ex.: R$ 490,00">
      </div>

      <div class="grupo">
        <label for="or_condicoes">Condições de pagamento</label>
        <textarea id="or_condicoes" placeholder="À vista com desconto / parcelamento / cartão, etc."></textarea>
      </div>

      <button class="botao" onclick="gerarPdfOrcamento()">
        Gerar PDF do Orçamento
      </button>
    </section>

    <div class="rodape">
      BTX-Tech • Sistema simples de fichas, receitas e orçamentos odontológicos
    </div>
  </div>

  <script>
    // Função auxiliar para pegar dados do profissional
    function getDadosProfissional() {
      return {
        nomeDentista: (document.getElementById('nomeDentista').value || '').trim(),
        croDentista: (document.getElementById('croDentista').value || '').trim(),
        nomeClinica: (document.getElementById('nomeClinica').value || '').trim(),
        cidadeUf: (document.getElementById('cidadeUf').value || '').trim()
      };
    }

    function formatarData(valor) {
      if (!valor) return '';
      const partes = valor.split('-'); // AAAA-MM-DD
      if (partes.length !== 3) return valor;
      return `${partes[2]}/${partes[1]}/${partes[0]}`;
    }

    // ============ FICHA CLÍNICA ============
    function gerarPdfFichaClinica() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      const prof = getDadosProfissional();
      const nomePaciente = (document.getElementById('fc_nomePaciente').value || '').trim();
      const dataAt = formatarData(document.getElementById('fc_data').value);
      const denteRegiao = (document.getElementById('fc_denteRegiao').value || '').trim();
      const queixa = (document.getElementById('fc_queixa').value || '').trim();
      const historia = (document.getElementById('fc_historia').value || '').trim();
      const exame = (document.getElementById('fc_exame').value || '').trim();

      const margem = 15;
      let y = 18;
      const larguraMax = 180;

      doc.setFont('Times', 'Bold');
      doc.setFontSize(13);
      doc.text(prof.nomeClinica || 'Clínica Odontológica', margem, y);
      y += 6;
      doc.setFontSize(10);
      doc.setFont('Times', 'Normal');
      if (prof.cidadeUf) doc.text(prof.cidadeUf, margem, y);

      y += 10;
      doc.setFont('Times', 'Bold');
      doc.setFontSize(14);
      doc.text('Ficha Clínica Odontológica', margem, y);

      y += 10;
      doc.setFontSize(11);
      doc.setFont('Times', 'Normal');
      doc.text(`Paciente: ${nomePaciente || '_____________________________'}`, margem, y);
      y += 6;
      doc.text(`Data: ${dataAt || '____/____/________'}`, margem, y);
      if (denteRegiao) {
        y += 6;
        doc.text(`Dente / região: ${denteRegiao}`, margem, y);
      }

      // Queixa principal
      y += 10;
      doc.setFont('Times', 'Bold');
      doc.text('Queixa principal:', margem, y);
      y += 5;
      doc.setFont('Times', 'Normal');
      let linhas = doc.splitTextToSize(queixa || '__________________________________________', larguraMax);
      doc.text(linhas, margem, y);
      y += linhas.length * 6;

      // História médica
      y += 6;
      doc.setFont('Times', 'Bold');
      doc.text('História médica / medicações:', margem, y);
      y += 5;
      doc.setFont('Times', 'Normal');
      linhas = doc.splitTextToSize(historia || '__________________________________________', larguraMax);
      doc.text(linhas, margem, y);
      y += linhas.length * 6;

      // Exame clínico
      y += 6;
      doc.setFont('Times', 'Bold');
      doc.text('Exame clínico / plano de tratamento:', margem, y);
      y += 5;
      doc.setFont('Times', 'Normal');
      linhas = doc.splitTextToSize(exame || '__________________________________________', larguraMax);
      doc.text(linhas, margem, y);
      y += linhas.length * 6 + 12;

      // Assinatura
      doc.text('__________________________________________', margem, y);
      y += 6;
      doc.text(prof.nomeDentista || 'Cirurgião-dentista', margem, y);
      y += 6;
      doc.text(`CRO: ${prof.croDentista || '__________'}`, margem, y);

      const nomeArquivo = `ficha_clinica_${(nomePaciente || 'paciente').replace(/\s+/g, '_')}.pdf`;
      doc.save(nomeArquivo);
    }

    // ============ RECEITA ============
    function gerarPdfReceita() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      const prof = getDadosProfissional();
      const nomePaciente = (document.getElementById('rc_nomePaciente').value || '').trim();
      const dataAt = formatarData(document.getElementById('rc_data').value);
      const validade = (document.getElementById('rc_validade').value || '').trim();
      const medicamentos = (document.getElementById('rc_medicamentos').value || '').trim();
      const obs = (document.getElementById('rc_observacoes').value || '').trim();

      const margem = 15;
      let y = 18;
      const larguraMax = 180;

      doc.setFont('Times', 'Bold');
      doc.setFontSize(13);
      doc.text(prof.nomeClinica || 'Clínica Odontológica', margem, y);
      y += 6;
      doc.setFontSize(10);
      doc.setFont('Times', 'Normal');
      if (prof.cidadeUf) doc.text(prof.cidadeUf, margem, y);

      y += 10;
      doc.setFont('Times', 'Bold');
      doc.setFontSize(14);
      doc.text('Receita Odontológica', margem, y);

      y += 10;
      doc.setFontSize(11);
      doc.setFont('Times', 'Normal');
      doc.text(`Paciente: ${nomePaciente || '_____________________________'}`, margem, y);
      y += 6;
      doc.text(`Data: ${dataAt || '____/____/________'}`, margem, y);
      if (validade) {
        y += 6;
        doc.text(`Validade: ${validade}`, margem, y);
      }

      y += 10;
      doc.setFont('Times', 'Bold');
      doc.text('Prescrição:', margem, y);
      y += 6;
      doc.setFont('Times', 'Normal');
      let linhas = doc.splitTextToSize(medicamentos || '__________________________________________', larguraMax);
      doc.text(linhas, margem, y);
      y += linhas.length * 6;

      if (obs) {
        y += 8;
        doc.setFont('Times', 'Bold');
        doc.text('Observações:', margem, y);
        y += 6;
        doc.setFont('Times', 'Normal');
        linhas = doc.splitTextToSize(obs, larguraMax);
        doc.text(linhas, margem, y);
        y += linhas.length * 6;
      }

      y += 14;
      doc.text('__________________________________________', margem, y);
      y += 6;
      doc.text(prof.nomeDentista || 'Cirurgião-dentista', margem, y);
      y += 6;
      doc.text(`CRO: ${prof.croDentista || '__________'}`, margem, y);

      const nomeArquivo = `receita_${(nomePaciente || 'paciente').replace(/\s+/g, '_')}.pdf`;
      doc.save(nomeArquivo);
    }

    // ============ ORÇAMENTO ============
    function gerarPdfOrcamento() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      const prof = getDadosProfissional();
      const nomePaciente = (document.getElementById('or_nomePaciente').value || '').trim();
      const dataAt = formatarData(document.getElementById('or_data').value);
      const validade = (document.getElementById('or_validade').value || '').trim();
      const itens = (document.getElementById('or_itens').value || '').trim();
      const total = (document.getElementById('or_total').value || '').trim();
      const condicoes = (document.getElementById('or_condicoes').value || '').trim();

      const margem = 15;
      let y = 18;
      const larguraMax = 180;

      doc.setFont('Times', 'Bold');
      doc.setFontSize(13);
      doc.text(prof.nomeClinica || 'Clínica Odontológica', margem, y);
      y += 6;
      doc.setFontSize(10);
      doc.setFont('Times', 'Normal');
      if (prof.cidadeUf) doc.text(prof.cidadeUf, margem, y);

      y += 10;
      doc.setFont('Times', 'Bold');
      doc.setFontSize(14);
      doc.text('Orçamento Odontológico', margem, y);

      y += 10;
      doc.setFontSize(11);
      doc.setFont('Times', 'Normal');
      doc.text(`Paciente: ${nomePaciente || '_____________________________'}`, margem, y);
      y += 6;
      doc.text(`Data: ${dataAt || '____/____/________'}`, margem, y);
      if (validade) {
        y += 6;
        doc.text(`Validade do orçamento: ${validade}`, margem, y);
      }

      y += 10;
      doc.setFont('Times', 'Bold');
      doc.text('Procedimentos e valores:', margem, y);
      y += 6;
      doc.setFont('Times', 'Normal');
      let linhas = doc.splitTextToSize(itens || '__________________________________________', larguraMax);
      doc.text(linhas, margem, y);
      y += linhas.length * 6;

      if (total) {
        y += 8;
        doc.setFont('Times', 'Bold');
        doc.text(`Valor total estimado: ${total}`, margem, y);
        y += 6;
      }

      if (condicoes) {
        y += 4;
        doc.setFont('Times', 'Bold');
        doc.text('Condições de pagamento:', margem, y);
        y += 6;
        doc.setFont('Times', 'Normal');
        linhas = doc.splitTextToSize(condicoes, larguraMax);
        doc.text(linhas, margem, y);
        y += linhas.length * 6;
      }

      y += 16;
      doc.text('__________________________________________', margem, y);
      y += 6;
      doc.text(prof.nomeDentista || 'Cirurgião-dentista', margem, y);
      y += 6;
      doc.text(`CRO: ${prof.croDentista || '__________'}`, margem, y);

      const nomeArquivo = `orcamento_${(nomePaciente || 'paciente').replace(/\s+/g, '_')}.pdf`;
      doc.save(nomeArquivo);
    }
  </script>
</body>
</html>
